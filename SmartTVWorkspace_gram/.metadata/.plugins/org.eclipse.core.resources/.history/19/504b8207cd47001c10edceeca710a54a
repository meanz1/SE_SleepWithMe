<!--
Copyright (c) 2020 LG Electronics Inc.
SPDX-License-Identifier: Apache-2.0
-->

<!DOCTYPE html>
<html>
<head>
<title>Example Web App</title>
<style type="text/css">
    body {
        background-image:url('bgimg.png');
        vertical-align: middle;
        height: 100%;
        width: 100%;
    }
    .top {
        margin-top: 200px;
    }
    .mid {
        text-align: center;
    }
    h1 {
        vertical-align: middle;
        text-align:center;
        color:#FFFFFF;
    }
</style>
<script type="text/javascript">
    var bridge = new WebOSServiceBridge();
    var cnt = 1;
    var isPause = false;
    var createToast;
    var count = 0
    var url = 'luna://com.webos.notification/createToast';
    var params = {
            "message":"Are you sleeping?"
        };
    var elseparams = {
    		"message":"not hello"
    };
    function toastCallback(msg) {
        console.log("before-parse-response");
        var response = JSON.parse(msg);
        console.log(response);
        
        
    }
    function startToast(){
    	isPause = false;
    	createToast = setInterval(function(){
    		runToast();
    	}, 4000)
    }
    function stopToast(){
    	clearInterval(createToast);
    	isPause = true;
    	document.getElementById("txt_msg").innerHTML="count2";
    }
    function runToast(){
    	if(!isPause){
    		bridge.onservicecallback = toastCallback;
            console.log("before-bridge.call");
            bridge.call(url, JSON.stringify(params));
            console.log("after-bridge.call");
            cnt = cnt + 1;
            count++;
            if (count == 3){
            	stopToast();
            	
            	
            }
    	}
    }
    
    

    
</script>
</head>
<body>
    <div class="top">
        <h1 id="txt_msg">Hello, Web Application!!</h1>
    </div>
    <div class="mid">
        <button onclick="startToast()">create toast</button>
        
    </div>
</body>
</html>